20092022 1940
Tags: #z #dev

---
# Преобразование типов

SQL язык - язык строгой типизации.
Основные типы, с которыми работает лексический анализатор:
- целые числа
- остальные числа
- текст
- идентификаторы
- ключевые слова

Элементы других типов могут записаны в кавычках и представлены как строки. Указывая тип данной строки, анализатор понимает, что данная строка - это элемент такого-то типа.

Для того, чтобы правильно определять типы, анализатор пользуется следующими факторами:
- смотрит на сохраняемые значения
- операторы
- функции
- UNION и CASE, и другие связанные конструкции

Принципы:
- результат неявного преобразования всегда должен быть очевидным
- если неявного преобразования не требуется, делать его не надо
- и др

## UNION, CASE

Данные SQL конструкции связывают данные. Для того, чтобы их связать требуется проанализировать типы колонок. Если типы совпадают, то всё хорошо, иначе будет задействовано неявное преобразование. Если преобразовать не удается, то констатируется неудача.

## Пример

```sql
SELECT text 'a' AS "text" UNION SELECT 'b';

--  text
-- ------
--  a
--  b
-- В данном случае константа 'b' неизвестного типа будет преобразована в тип text.

SELECT 1 AS "real" UNION SELECT CAST('2.2' AS REAL);

--  real
-- ------
--     1
--   2.2
-- Здесь значение типа real нельзя неявно привести к integer, но integer можно неявно привести к real, поэтому типом результата объединения будет real.
```

---
### Zero-Links
- [[00 PostgreSQL]]

---
### Links
- 

---
### Outer links
- https://postgrespro.ru/docs/postgresql/9.6/typeconv-overview