21092022 1846
Tags: #z #dev #quest 

---
# Изоляция транзакций

Есть несколько особых условий, которые могут возникнуть при выполнении нескольких транзакций:
- грязное чтение (Т1 читает данные, которые T2 еще не зафиксировала)
- неповторяемое чтение (T1 повторно читает данные и видит, что данные изменились в ходе T2, которая завершилась после первого чтения)
- фантомное чтение (T1 повторно выполняет запрос и обнаруживает, что количество строк изменилось в ходе T2, которая завершилась)
- аномальная сериализация (после завершения транзакций обнаруживается состояние данных, которое не могло быть в результате никаких сочетаний выполнения транзакций по очереди)

Методы изоляции транзакций не допускают возникновения таких явлений на определенном уровне.

## Уровни изоляции


Уровень | грязное | неповторяемое | фантомное | аномальная
------- | ------- | ------------- | --------- | ----------
read uncommitted | + | + | + | + |
read committed | - | + | + | + |
repeatable read | - | - | + | + |
serializable | - | - | - | - |


>[!warning] Последовательности
>Изменения в последовательности сразу видны во всех транзакциях. Не откатываются назад, если транзакция прерывается.

Команды *TRUNCATE, ALTER TABLE* не являются безопасными. Это значит, что после фиксации усечения или перезаписи таблица окажется пустой для всех параллельных транзакций, если они работают со снимком, полученным перед фиксацией такой команды DDL.

---
### Zero-Links
- [[00 PostgreSQL]]

---
### Links
- 
  
---
### Outer links
- https://postgrespro.ru/docs/postgresql/9.6/transaction-iso