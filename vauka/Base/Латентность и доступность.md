23052024 1314
Tags: #z #dev

---
# Латентность и доступность

Иногда требуется вычислить "на коленке" требования к производительности системы. Такие вычисления дают понять то, какие архитектуры соответствуют вашим требованиям.

## Латентность

Показатели латентности - это показатели типичных компьютерных операций, например, чтение с диска, передача данных по сети и т.д.
Чем выше латентность системы (например, требуется часто выполнять поиск по диску), тем больше ресурсов требуется для того, чтобы система работала "быстро".

## Доступность

Высокая доступность - это способность системы долго и непрерывно работать без сбоев.
SLA (service level agreement) - соглашение об уровне услуг. SLA определяет уровень беспрерывной работы сервиса. Для Amazon, Google, Microsoft SLA >= 99.9%.
Чем выше SLA, тем меньше простой сервиса (в сутки, неделю и т.д.).

## Пример

Оценка требований к QPS и хранилищу Твиттер.

Предположение:
- 300 млн. пользователей в мес.
- 50% заходят ежедневно
- 1 человек публикуют в среднем 2 твита
- 100% твитов содержат медиа данные
- данные хранятся 5 лет

Оценки:
- 300 млн. * 50% = 150 млн. пользователей ежедневно
- QPS = 150 млн. * 2 твита / 24 часа / 3600 сек. = ~ 3500
- пиковый QPS = 2 * 3500 = 7000
- размер твита:
	- tweet_id = 64 байта
	- текст - 140 байтов
	- медиа данные - 1 Мб
- объем данных в день: 150 млн. * 2 твита * 10% * 1 Мб = 30 Тб в день
- за 5 лет: ~55 Пб

---
### Zero-Links
- [[00 Архитектура и дизайн ПО]]

---
### Links
- [[System Design, Алекс Сюй]] с. 41

---
### Outer links
- 