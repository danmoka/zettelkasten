27112022 1532
Tags: #z #dev

---
# Абстрактные компоненты

Устойчивость компонента пропорциональна его абстрактности.
Абстрактные компоненты, например, которые не содержат реализацию, а лишь объявляют интерфейс, являются очень устойчивыми, а значит - это идеальная цель для зависимостей в менее устойчивых компонентах.

Абстрактные классы могут содержать высокоуровневые правила и решения. Приэтом они позволяют соблюдать правила OCP, тем самым делая высокоуровневую логику гибкой.

## Устойчивость абстракций

SAP:
- устойчивый компонент должен быть абстрактным, чтобы его устойчивость не мешала расширению (абстрактные классы, интерфейсы)
- неустойчивые компоненты должны быть конретными, чтобы с легкостью их изменять

SAP + SDP соответствуют принципам DIP.

## Мера абстрактности

A = Na / Nc, где Na - количество абстрактных классов/интерфейсов, Nc - общее количество классов.

![[Pasted image 20221127170220.png]]

## Зоны исключения

Изобразив координатную плоскость (I/A), можно убедиться, что абстрактные и устойчивые компоненты находятся в левом верхнем углу, а конкретные и неустойчивые в правом нижнем, но не все компоненты находятся в этих точках. Для того, чтобы определить оптимальные позиции для компонентов, можно выбрать зоны, где компоненты не должны находиться.

## Зона боли

Компонент в точке (0, 0) - устойчивый и конкретный. Трудно изменять, т.к. устойчивый, трудно расширять, т.к. конкретный. Всё, что рядом, близко к этому случаю.

## Зона бесполезности

Компонент в точке (1, 1) - неустойчивый (нет входящих зависимостей) и абстрактный. Абстрактная сущность без зависимостей от неё - нежелательна.

## Главная последовательность

Оптимальное расположение компонентов - это расположение на или вблизи главной последовательности (прямая через две точки (0, 1) и (1, 0)).

D: расстояние до главной последовательности. D = |A + I - 1| . Эта метрика принимает значения из диапазона от 0 до 1. Значение 0 указывает, что компонент находится прямо на главной последовательности. Значение 1 сообщает, что компонент располагается на максимальном удалении от главной последовательности. Любой компонент со значением метрики D, далеким от нуля, требует пересмотра и реструктуризации.

---
### Zero-Links
- 

---
### Links
- [[SDP (устойчивость)]]
- [[OCP (архитектура)]]
- [[DIP (архитектура)]]

---
### Outer links
- [[Чистая архитектура, Роберт Мартин]] (с. 135)