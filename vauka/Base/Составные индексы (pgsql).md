21092022 1252
Tags: #z #dev

---
# Составные индексы

Если часто выполняются запросы вида:

```sql
SELECT * FROM test1 WHERE a = 'константа' AND b = 'константа';
```

то есть смысл задуматься над тем, чтобы создать составной индекс на a и b.

```sql
CREATE INDEX test_ab_index ON test (a, b);
```

Составной индекс можно создать для структуры B-tree, GIN, GiST, BRIN. Если составной индекс состоит из > 3 колонок, то это плохая идея. Зачастую, индекс на одну колонку достаточно ускоряет поиск и не требует много памяти.

B-tree: область поиска в основном определяется (левыми) столбцами с условием равенства (=, >=, например) и первыми столбцами (не поиска), где равенства нет.

GiST: в основном ограничивает область поиска первым столбцом.

GIN и BRIN: эффективность поиска не зависит от столбцов и условий.

---
### Zero-Links
- 

---
### Links
- [[Индексы (pgsql)]]