08122022 1723
Tags: #z #dev

---
# Чистая архитектура

Было предложено множество архитектур. Несмотря на различия они были во многом похожи:
- независимость от фреймворков
- простота тестирования
- независимость от пользовательского интерфейса
- независимость от баз данных
- независимость от внешних агентов

В общем случае диаграмма разбиения архитектуры на уровни выглядит следующим образом:
![[Pasted image 20221208172850.png]]

## Правила зависимостей

Все зависимости должны быть направлены в сторону внутренних кругов, т.е. в сторону более устойчивых, высокоуровневых кругов. Это достижимо благодаря инверсии зависимостей и динамическому полиморфизму.

## Сущности

Содержат критические бизнес правила, которые навряд ли будут меняться, т.е. они инкапсулируют высокоуровневую логику.

## Варианты использования

Данный круг содержит бизнес правила, характерные для приложения. Инкапсулирует все варианты использования системы. Организует поток данных в сущности и из них.

## Адаптеры интерфейсов

Данный уровень отвечает за преобразование данных.
Внешние агенты -> варианты использования/сущности.
Варианты использования/сущности -> внешние агенты.

## Фреймворки и драйверы

На этом уровне сосредоточены детали. Веб-интерфейс - это деталь, как и драйвер БД.

## Передача данных

Данные всегда должны принимать форму удобную для внутренних кругов при передаче данных через границы. Форма данных объявляется во внутреннем круге, чтобы не было зависимости от внешнего круга. Внешний круг вынужден подстраивать данные под нужную форму.

## Вывод

Таким образом, получаем возможность без боли менять "детали". Например, изменить фреймворк, БД не составит труда.

---
### Zero-Links
- [[00 Архитектура]]

---
### Links
- [[DIP (архитектура)]]

---
### Outer links
- [[Чистая архитектура, Роберт Мартин]] (с. 203)