20092022 1449
Tags: #z #dev

---
# Условные выражения

Условные выражения *CASE ... END* SQL похожи на условия if/else.
Условное выражение *CASE ... END* включает в себя выражения-условия *WHEN ...*, которые возвращают значение boolean. А также выражения *THEN ...*, обозначающие то, то надо возвращать при выполнении условия. Возвращаемые значения должны быть одного типа.

Если условие возвращает true, то остальные условия не выполняются, иначе продолжается поиск такого условия, вплоть до выражения *ELSE ...* (если его нет, то возвращается NULL).

## Пример

```sql
SELECT a,
    CASE
        WHEN a = 1 THEN 'one'
        WHEN a = 2 THEN 'two'
        ELSE 'other'
    END
FROM test;

SELECT a,
    CASE a
        WHEN 1 THEN 'one'
        WHEN 2 then 'two'
        ELSE 'other'
    END;
```

## COALESCE

Функция, возвращающая первое значение неравное NULL. Если все значения NULL, то вернет NULL.

```sql
-- вернут строку 'none', если значения desc и short_desc равны NULL
SELECT COALESCE(desc, short_desc, 'none');
```

## GREATEST, LEST

Функции, возвращающие наибольшее и наименьшее, соответственно. Игнорируют NULL.

---
### Zero-Links
- 

---
### Links
- [[Функции и операторы (pgsql)]]